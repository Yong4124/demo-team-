<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('지원현황 - 주한미군 전역장병 채용 플랫폼')}"></head>

<body class="sub">
<div class="wrapper">

    <th:block th:replace="~{fragments/header :: header}"></th:block>

    <div class="sub_container">
        <div class="container">

            <div th:replace="~{personal/fragments/sidebar :: sidebar('applications')}"></div>

            <div class="sub_tit mb20">지원현황</div>
            <div class="sub_txt mb60">지원한 채용공고 현황을 확인하실 수 있습니다.</div>

            <div class="table_wrap">
                <table class="data_table">
                    <colgroup>
                        <col width="8%"><col width="*"><col width="18%"><col width="12%"><col width="12%"><col width="10%">
                    </colgroup>
                    <thead>
                        <tr><th>번호</th><th>공고명</th><th>회사명</th><th>지원일</th><th>마감일</th><th>상태</th></tr>
                    </thead>
                    <tbody>
                        <tr th:each="app, stat : ${applications}">
                            <td th:text="${stat.count}">1</td>
                            <td style="text-align:left;"><a th:href="@{/job/detail/{id}(id=${app.jobPosting.id})}" th:text="${app.jobPosting.title}">공고제목</a></td>
                            <td th:text="${app.jobPosting.companyMember?.company}">회사명</td>
                            <td th:text="${#temporals.format(app.createdAt, 'yyyy-MM-dd')}">2025-01-01</td>
                            <td th:text="${#temporals.format(app.jobPosting.endDate, 'yyyy-MM-dd')}">2025-01-31</td>
                            <td><span class="badge" th:classappend="${app.status == '서류합격'} ? 'pass' : (${app.status == '불합격'} ? 'fail' : '')" th:text="${app.status ?: '접수완료'}">접수완료</span></td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(applications)}">
                            <td colspan="6" style="text-align:center; padding:60px;">
                                <p style="font-size:18px; color:#666; margin-bottom:20px;">지원내역이 없습니다.</p>
                                <a th:href="@{/job/list}" class="btn-submit">채용공고 보러가기</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
</div>
<th:block th:replace="~{fragments/footer :: scripts}"></th:block>
<style>
.data_table { width:100%; border-collapse:collapse; }
.data_table th, .data_table td { padding:15px; border-bottom:1px solid #eee; text-align:center; }
.data_table th { background:#f8f9fa; font-weight:600; }
.data_table td a { color:#333; }
.data_table td a:hover { color:#255EB8; }
.badge { display:inline-block; padding:5px 12px; border-radius:20px; font-size:13px; background:#e0e0e0; }
.badge.pass { background:#d4edda; color:#155724; }
.badge.fail { background:#f8d7da; color:#721c24; }
</style>
</body>
</html>
