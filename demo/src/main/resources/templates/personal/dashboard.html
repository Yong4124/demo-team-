<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/head :: head('ë§ˆì´í˜ì´ì§€ - ì£¼í•œë¯¸êµ° ì „ì—­ì¥ë³‘ ì±„ìš© í”Œë«í¼')}"></head>

<body class="sub">
<div class="wrapper">

    <th:block th:replace="~{fragments/header :: header}"></th:block>

    <div class="sub_container">
        <div class="container">

            <!-- ë§ˆì´í˜ì´ì§€ ì„œë¸Œë©”ë‰´ -->
            <div th:replace="~{personal/fragments/sidebar :: sidebar('dashboard')}"></div>

            <div class="sub_tit mb20">ë§ˆì´í˜ì´ì§€</div>
            <div class="sub_txt mb60">í™˜ì˜í•©ë‹ˆë‹¤, <span th:text="${member.firstName}">íšŒì›</span>ë‹˜!</div>

            <!-- ëŒ€ì‹œë³´ë“œ ì¹´ë“œ -->
            <div class="dashboard_wrap" style="display:grid; grid-template-columns:repeat(3, 1fr); gap:30px; margin-bottom:60px;">
                
                <!-- ì§€ì›í˜„í™© -->
                <div class="dash_card" style="background:#f8f9fa; border-radius:20px; padding:30px; text-align:center;">
                    <div class="icon" style="font-size:40px; margin-bottom:15px;">ğŸ“</div>
                    <div class="title" style="font-size:18px; font-weight:600; margin-bottom:10px;">ì§€ì›í˜„í™©</div>
                    <div class="count" style="font-size:36px; font-weight:700; color:#255EB8;" th:text="${applicationCount}">0</div>
                    <a th:href="@{/personal/applications}" style="display:inline-block; margin-top:15px; color:#666;">ìì„¸íˆ ë³´ê¸° â†’</a>
                </div>

                <!-- ê´€ì‹¬ê¸°ì—… -->
                <div class="dash_card" style="background:#f8f9fa; border-radius:20px; padding:30px; text-align:center;">
                    <div class="icon" style="font-size:40px; margin-bottom:15px;">â­</div>
                    <div class="title" style="font-size:18px; font-weight:600; margin-bottom:10px;">ê´€ì‹¬ê¸°ì—…</div>
                    <div class="count" style="font-size:36px; font-weight:700; color:#255EB8;" th:text="${favoriteCount}">0</div>
                    <a th:href="@{/personal/favorites}" style="display:inline-block; margin-top:15px; color:#666;">ìì„¸íˆ ë³´ê¸° â†’</a>
                </div>

                <!-- ì´ë ¥ì„œ -->
                <div class="dash_card" style="background:#f8f9fa; border-radius:20px; padding:30px; text-align:center;">
                    <div class="icon" style="font-size:40px; margin-bottom:15px;">ğŸ“„</div>
                    <div class="title" style="font-size:18px; font-weight:600; margin-bottom:10px;">ì´ë ¥ì„œ</div>
                    <div class="count" style="font-size:36px; font-weight:700; color:#255EB8;" th:text="${resumeCount}">0</div>
                    <a th:href="@{/personal/resumes}" style="display:inline-block; margin-top:15px; color:#666;">ìì„¸íˆ ë³´ê¸° â†’</a>
                </div>

            </div>

            <!-- ìµœê·¼ ì§€ì›ë‚´ì—­ -->
            <div class="sub_stit mb30">ìµœê·¼ ì§€ì›ë‚´ì—­</div>
            <div class="table_wrap mb60">
                <table class="data_table">
                    <colgroup>
                        <col width="10%">
                        <col width="*">
                        <col width="20%">
                        <col width="15%">
                        <col width="15%">
                    </colgroup>
                    <thead>
                        <tr>
                            <th>ë²ˆí˜¸</th>
                            <th>ê³µê³ ëª…</th>
                            <th>íšŒì‚¬ëª…</th>
                            <th>ì§€ì›ì¼</th>
                            <th>ìƒíƒœ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="app, stat : ${recentApplications}">
                            <td th:text="${stat.count}">1</td>
                            <td>
                                <a th:href="@{/job/detail/{id}(id=${app.jobPosting.id})}" th:text="${app.jobPosting.title}">ê³µê³ ì œëª©</a>
                            </td>
                            <td th:text="${app.jobPosting.companyMember?.company}">íšŒì‚¬ëª…</td>
                            <td th:text="${#temporals.format(app.createdAt, 'yyyy-MM-dd')}">2025-01-01</td>
                            <td>
                                <span class="badge" th:classappend="${app.status == 'ì„œë¥˜í•©ê²©'} ? 'pass' : (${app.status == 'ë¶ˆí•©ê²©'} ? 'fail' : '')" 
                                      th:text="${app.status ?: 'ì ‘ìˆ˜ì™„ë£Œ'}">ì ‘ìˆ˜ì™„ë£Œ</span>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(recentApplications)}">
                            <td colspan="5" style="text-align:center; padding:40px;">ì§€ì›ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
</div>

<th:block th:replace="~{fragments/footer :: scripts}"></th:block>

<style>
.data_table { width:100%; border-collapse:collapse; }
.data_table th, .data_table td { padding:15px; border-bottom:1px solid #eee; text-align:center; }
.data_table th { background:#f8f9fa; font-weight:600; }
.data_table td a { color:#333; }
.data_table td a:hover { color:#255EB8; }
.badge { display:inline-block; padding:5px 12px; border-radius:20px; font-size:13px; background:#e0e0e0; }
.badge.pass { background:#d4edda; color:#155724; }
.badge.fail { background:#f8d7da; color:#721c24; }
</style>

</body>
</html>
