<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('채용공고관리 - 주한미군 전역장병 채용 플랫폼')}"></head>

<body class="sub">
<div class="wrapper">

    <th:block th:replace="~{fragments/header :: header}"></th:block>

    <div class="sub_container">
        <div class="container">

            <div th:replace="~{company/fragments/sidebar :: sidebar('jobs')}"></div>

            <div class="sub_tit_wrap between">
                <div class="sub_tit">채용공고관리</div>
                <a th:href="@{/company/job/new}" class="btn-submit">공고 등록</a>
            </div>
            <div class="sub_txt mb60">등록한 채용공고를 관리할 수 있습니다.</div>

            <div class="table_wrap">
                <table class="data_table">
                    <colgroup>
                        <col width="8%"><col width="*"><col width="12%"><col width="12%"><col width="10%"><col width="10%"><col width="15%">
                    </colgroup>
                    <thead>
                        <tr><th>번호</th><th>공고명</th><th>시작일</th><th>마감일</th><th>지원자</th><th>상태</th><th>관리</th></tr>
                    </thead>
                    <tbody>
                        <tr th:each="job, stat : ${jobs}">
                            <td th:text="${stat.count}">1</td>
                            <td style="text-align:left;"><a th:href="@{/job/detail/{id}(id=${job.id})}" th:text="${job.title}">공고제목</a></td>
                            <td th:text="${#temporals.format(job.startDate, 'yyyy-MM-dd')}">2025-01-01</td>
                            <td th:text="${#temporals.format(job.endDate, 'yyyy-MM-dd')}">2025-01-31</td>
                            <td th:text="${applicationCounts[job.id] ?: 0}">0</td>
                            <td><span class="badge" th:classappend="${job.postingYn == '1'} ? 'active' : 'draft'" th:text="${job.postingYn == '1'} ? '게시중' : '임시저장'">게시중</span></td>
                            <td>
                                <a th:href="@{/company/job/edit/{id}(id=${job.id})}" class="btn-sm">수정</a>
                                <button type="button" class="btn-sm-cancel" th:onclick="'deleteJob(' + ${job.id} + ')'">삭제</button>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(jobs)}">
                            <td colspan="7" style="text-align:center; padding:60px;">
                                <p style="font-size:18px; color:#666; margin-bottom:20px;">등록된 채용공고가 없습니다.</p>
                                <a th:href="@{/company/job/new}" class="btn-submit">채용공고 등록하기</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
</div>
<th:block th:replace="~{fragments/footer :: scripts}"></th:block>
<script>function deleteJob(id) { if(confirm('삭제하시겠습니까?')) location.href='/company/job/delete/'+id; }</script>
<style>
.data_table { width:100%; border-collapse:collapse; }
.data_table th, .data_table td { padding:15px; border-bottom:1px solid #eee; text-align:center; }
.data_table th { background:#f8f9fa; font-weight:600; }
.btn-sm { padding:8px 15px; background:#255EB8; color:#fff; border-radius:5px; text-decoration:none; font-size:13px; margin-right:5px; }
.btn-sm-cancel { padding:8px 15px; border:1px solid #ddd; background:#fff; border-radius:5px; cursor:pointer; font-size:13px; }
.badge { display:inline-block; padding:5px 12px; border-radius:20px; font-size:13px; background:#e0e0e0; }
.badge.active { background:#d4edda; color:#155724; }
.badge.draft { background:#fff3cd; color:#856404; }
.sub_tit_wrap.between { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
</style>
</body>
</html>
