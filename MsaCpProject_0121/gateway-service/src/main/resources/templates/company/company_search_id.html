<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>기업회원 아이디 찾기 - 주한미군 전역장병 채용 플랫폼</title>

    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/sub.css">
</head>

<script type="text/javascript">
    async function goFindId() {
        var form = document.rpForm;
        
        if ((form.MANAGER_NM.value).length == 0) {
            alert('담당자명을 입력해주세요.');
            form.MANAGER_NM.focus();
            return;
        }
        
        if ((form.EMAIL.value).length == 0) {
            alert('이메일을 입력해주세요.');
            form.EMAIL.focus();
            return;
        }
        
        try {
            const response = await fetch('/api/company/find-id', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    managerNm: form.MANAGER_NM.value,
                    email: form.EMAIL.value
                })
            });
            const data = await response.json();
            
            if (data.success) {
                document.getElementById('resultArea').style.display = 'block';
                document.getElementById('foundId').textContent = data.loginId;
            } else {
                alert(data.message || '일치하는 회원 정보가 없습니다.');
            }
        } catch (error) {
            alert('아이디 찾기 중 오류가 발생했습니다.');
        }
    }
</script>

<body class="sub">

<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="wrapper">
<form name="rpForm" method="post">
<div class="sub_container">
<div class="container">
<div class="login_view">
    <div class="sub_tit mb20">아이디 찾기</div>
    <div class="sub_tab">
        <a href="/search-id">개인회원</a>
        <a href="#" class="on">기업회원</a>
    </div>
    
    <div class="login_box">
        <div class="mar1">
            <input type="text" class="input" name="MANAGER_NM" maxlength="500" placeholder="담당자명">
        </div>
        <div class="mar2">
            <input type="text" class="input" name="EMAIL" maxlength="100" placeholder="이메일">
        </div>
        <div class="btn_area center">
            <a href="javascript:goFindId();" class="btn-submit">아이디 찾기</a>
        </div>
    </div>
    
    <div id="resultArea" style="display:none; margin-top:20px; padding:20px; background:#f5f5f5; border-radius:5px; text-align:center;">
        <p style="font-size:16px;">찾으신 아이디는</p>
        <p style="font-size:24px; font-weight:bold; color:#333; margin:10px 0;" id="foundId"></p>
        <p style="font-size:14px; color:#666;">입니다.</p>
        <div style="margin-top:15px;">
            <a href="/company/login" class="btn-submit" style="display:inline-block; padding:10px 30px;">로그인하기</a>
        </div>
    </div>
    
    <div class="join_info">
        <a href="/company/login">로그인</a>
        <span class="bar"></span>
        <a href="/company/search-pw">비밀번호 찾기</a>
        <span class="bar"></span>
        <a href="/company/register">회원가입</a>
    </div>
</div>
</div>
</div>
    <div th:replace="~{fragments/footer :: footer}"></div>
</form>
</div>

<script src="/js/common.js?v=1"></script>
<script src="/js/main.js"></script>
</body>
</html>
