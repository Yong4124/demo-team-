<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>비밀번호 변경 - USFK Jobs</title>
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,sans-serif;background:#f5f5f5}.header{background:#fff;border-bottom:1px solid #e0e0e0;padding:15px 0}.container{max-width:1200px;margin:0 auto;padding:0 15px}.logo{font-size:24px;font-weight:700;color:#255EB8}.pw_wrap{max-width:500px;margin:80px auto;padding:40px;background:#fff;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}.page_tit{font-size:24px;font-weight:700;color:#333;margin-bottom:30px;text-align:center}.form_group{margin-bottom:20px}.form_group label{display:block;font-size:14px;font-weight:500;margin-bottom:8px}.form_group input{width:100%;height:50px;padding:0 15px;border:1px solid #ddd;border-radius:5px}.btn_area{margin-top:30px}.btn_area button{width:100%;height:55px;background:#255EB8;color:#fff;font-size:18px;border:none;border-radius:5px;cursor:pointer}</style>
</head><body>
<header class="header"><div class="container"><a href="/" class="logo">USFK Jobs</a></div></header>
<div class="pw_wrap">
    <h2 class="page_tit">비밀번호 변경</h2>
    <form onsubmit="return changePw(event)">
        <div class="form_group"><label>현재 비밀번호</label><input type="password" id="currentPw" required></div>
        <div class="form_group"><label>새 비밀번호</label><input type="password" id="newPw" required></div>
        <div class="form_group"><label>새 비밀번호 확인</label><input type="password" id="confirmPw" required></div>
        <div class="btn_area"><button type="submit">비밀번호 변경</button></div>
    </form>
</div>
<script>
async function changePw(e) {
    e.preventDefault();
    var newPw = document.getElementById('newPw').value;
    if (newPw !== document.getElementById('confirmPw').value) { alert('새 비밀번호가 일치하지 않습니다.'); return false; }
    var seqNo = sessionStorage.getItem('companySeqNo');
    if (!seqNo) { window.location.href = '/company/login'; return false; }
    var res = await fetch('/api/company/mypage/' + seqNo + '/password', {
        method: 'PUT', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ currentPassword: document.getElementById('currentPw').value, newPassword: newPw })
    });
    var data = await res.json();
    alert(data.message);
    if (data.success) { sessionStorage.clear(); window.location.href = '/company/login'; }
    return false;
}
</script>
</body></html>
