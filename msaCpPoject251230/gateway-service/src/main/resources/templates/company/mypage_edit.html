<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>정보 수정 - USFK Jobs</title>
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,sans-serif;background:#f5f5f5}a{text-decoration:none}.header{background:#fff;border-bottom:1px solid #e0e0e0;padding:15px 0}.container{max-width:1200px;margin:0 auto;padding:0 15px}.logo{font-size:24px;font-weight:700;color:#255EB8}.edit_wrap{max-width:800px;margin:40px auto;padding:0 15px}.page_tit{font-size:24px;font-weight:700;color:#333;padding-bottom:15px;border-bottom:2px solid #255EB8;margin-bottom:30px}.form_section{background:#fff;border:1px solid #e0e0e0;border-radius:10px;padding:30px;margin-bottom:20px}.section_tit{font-size:18px;font-weight:600;padding-bottom:15px;border-bottom:2px solid #255EB8;margin-bottom:25px}.form_row{display:flex;flex-wrap:wrap;margin:0 -10px}.form_col{padding:0 10px;margin-bottom:20px;width:50%}.form_col.full{width:100%}.form_col label{display:block;font-size:14px;font-weight:500;margin-bottom:8px}.form_col input,.form_col textarea{width:100%;height:45px;padding:0 15px;border:1px solid #ddd;border-radius:5px}.form_col textarea{height:120px;padding:15px}.btn_area{text-align:center;margin-top:30px}.btn_area button{padding:15px 50px;font-size:16px;border:none;border-radius:5px;cursor:pointer;margin:0 5px}.btn_submit{background:#255EB8;color:#fff}.btn_cancel{background:#fff;color:#666;border:1px solid #ddd!important}</style>
</head><body>
<header class="header"><div class="container"><a href="/" class="logo">USFK Jobs</a></div></header>
<div class="edit_wrap">
    <h2 class="page_tit">정보 수정</h2>
    <form id="editForm" onsubmit="return doUpdate(event)">
        <div class="form_section">
            <h3 class="section_tit">회사 정보</h3>
            <div class="form_row">
                <div class="form_col"><label>회사명 (한글)</label><input type="text" id="companyNmKo" required></div>
                <div class="form_col"><label>회사명 (영문)</label><input type="text" id="companyNmEn"></div>
                <div class="form_col"><label>업종</label><input type="text" id="industry"></div>
                <div class="form_col"><label>웹사이트</label><input type="url" id="website"></div>
                <div class="form_col full"><label>회사 주소</label><input type="text" id="addressKo"></div>
            </div>
        </div>
        <div class="form_section">
            <h3 class="section_tit">담당자 정보</h3>
            <div class="form_row">
                <div class="form_col"><label>담당자명</label><input type="text" id="managerNm" required></div>
                <div class="form_col"><label>직책</label><input type="text" id="managerPosition"></div>
                <div class="form_col"><label>이메일</label><input type="email" id="email" required></div>
                <div class="form_col"><label>전화번호</label><input type="tel" id="phone" required></div>
            </div>
        </div>
        <div class="btn_area">
            <button type="button" class="btn_cancel" onclick="history.back()">취소</button>
            <button type="submit" class="btn_submit">저장하기</button>
        </div>
    </form>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var seqNo = sessionStorage.getItem('companySeqNo');
    if (!seqNo) { window.location.href = '/company/login'; return; }
    fetch('/api/company/mypage/' + seqNo).then(r=>r.json()).then(function(res) {
        if (res.success) {
            var d = res.data;
            document.getElementById('companyNmKo').value = d.companyNmKo || '';
            document.getElementById('companyNmEn').value = d.companyNmEn || '';
            document.getElementById('industry').value = d.industry || '';
            document.getElementById('website').value = d.website || '';
            document.getElementById('addressKo').value = d.addressKo || '';
            document.getElementById('managerNm').value = d.managerNm || '';
            document.getElementById('managerPosition').value = d.managerPosition || '';
            document.getElementById('email').value = d.email || '';
            document.getElementById('phone').value = d.phone || '';
        }
    });
});
async function doUpdate(e) {
    e.preventDefault();
    var seqNo = sessionStorage.getItem('companySeqNo');
    var res = await fetch('/api/company/mypage/' + seqNo, {
        method: 'PUT', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            companyNmKo: document.getElementById('companyNmKo').value,
            companyNmEn: document.getElementById('companyNmEn').value,
            industry: document.getElementById('industry').value,
            website: document.getElementById('website').value,
            addressKo: document.getElementById('addressKo').value,
            managerNm: document.getElementById('managerNm').value,
            managerPosition: document.getElementById('managerPosition').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value
        })
    });
    var data = await res.json();
    alert(data.message);
    if (data.success) window.location.href = '/company/mypage';
    return false;
}
</script>
</body></html>
