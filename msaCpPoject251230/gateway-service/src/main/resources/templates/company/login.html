<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>기업회원 로그인 - USFK Jobs</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #f5f5f5; min-height: 100vh; display: flex; flex-direction: column; }
        a { text-decoration: none; color: inherit; }
        .header { background: #fff; border-bottom: 1px solid #e0e0e0; padding: 15px 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        .logo { font-size: 24px; font-weight: 700; color: #255EB8; }
        .login_wrap { max-width: 450px; margin: 80px auto; padding: 40px; background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .login_tit { text-align: center; font-size: 28px; font-weight: 700; color: #255EB8; margin-bottom: 10px; }
        .login_sub { text-align: center; font-size: 14px; color: #666; margin-bottom: 30px; }
        .member_type { display: flex; justify-content: center; margin-bottom: 30px; gap: 10px; }
        .member_type a { padding: 10px 25px; border: 1px solid #ddd; border-radius: 25px; font-size: 14px; color: #666; }
        .member_type a.active { background: #255EB8; color: #fff; border-color: #255EB8; }
        .input_box { margin-bottom: 15px; }
        .input_box label { display: block; font-size: 14px; color: #333; font-weight: 500; margin-bottom: 8px; }
        .input_box input { width: 100%; height: 50px; padding: 0 15px; border: 1px solid #ddd; border-radius: 5px; font-size: 15px; }
        .input_box input:focus { border-color: #255EB8; outline: none; }
        .btn_login { width: 100%; height: 55px; background: #255EB8; color: #fff; font-size: 18px; font-weight: 600; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; }
        .btn_login:hover { background: #1a4a94; }
        .link_area { display: flex; justify-content: center; gap: 20px; margin-top: 25px; padding-top: 25px; border-top: 1px solid #eee; }
        .link_area a { font-size: 14px; color: #666; }
        .link_area a:hover { color: #255EB8; }
        .alert_msg { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; padding: 12px; border-radius: 5px; margin-bottom: 20px; display: none; }
        .footer { background: #f0f0f0; padding: 30px 0; margin-top: auto; text-align: center; color: #666; font-size: 14px; }
    </style>
</head>
<body>
<header class="header"><div class="container"><a href="/" class="logo">USFK Jobs</a></div></header>

<div class="login_wrap">
    <h2 class="login_tit">기업회원 로그인</h2>
    <p class="login_sub">USFK Jobs Employment Platform</p>
    
    <div class="member_type">
        <a href="/personal/login">개인회원</a>
        <a href="/company/login" class="active">기업회원</a>
    </div>

    <div id="alertMsg" class="alert_msg"></div>

    <form id="loginForm" onsubmit="return doLogin(event)">
        <div class="input_box">
            <label>아이디</label>
            <input type="text" id="loginId" placeholder="아이디를 입력하세요" required>
        </div>
        <div class="input_box">
            <label>비밀번호</label>
            <input type="password" id="password" placeholder="비밀번호를 입력하세요" required>
        </div>
        <button type="submit" class="btn_login">로그인</button>
    </form>

    <div class="link_area">
        <a href="/company/register">회원가입</a>
        <a href="#">아이디 찾기</a>
        <a href="#">비밀번호 찾기</a>
    </div>
</div>

<footer class="footer"><p>© 2025 USFK Jobs. All rights reserved.</p></footer>

<script>
async function doLogin(event) {
    event.preventDefault();
    var loginId = document.getElementById('loginId').value;
    var password = document.getElementById('password').value;
    var alertMsg = document.getElementById('alertMsg');

    try {
        var res = await fetch('/api/company/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ loginId: loginId, password: password })
        });
        var data = await res.json();

        if (data.success) {
            sessionStorage.setItem('companyToken', data.token);
            sessionStorage.setItem('companyName', data.companyName);
            sessionStorage.setItem('companySeqNo', data.seqNo);
            alert('로그인 성공! ' + data.companyName + '님 환영합니다.');
            window.location.href = '/company/mypage';
        } else {
            alertMsg.textContent = data.message;
            alertMsg.style.display = 'block';
        }
    } catch(e) {
        alertMsg.textContent = '로그인 중 오류가 발생했습니다.';
        alertMsg.style.display = 'block';
    }
    return false;
}
</script>
</body>
</html>
